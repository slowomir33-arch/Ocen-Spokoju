@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Removed body:not(.intro-ready) - now handled inline in layout */
  
  body {
    @apply text-gray-800 overflow-x-hidden;
    background: linear-gradient(135deg, #FFF9F0 0%, #F5E6D3 25%, #E8D4A0 50%, #F5E6D3 75%, #FFF9F0 100%);
    position: relative;
  }
  
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
    background-image: 
      radial-gradient(at 20% 30%, rgba(212, 175, 55, 0.25) 0px, transparent 40%),
      radial-gradient(at 80% 20%, rgba(123, 79, 184, 0.25) 0px, transparent 40%),
      radial-gradient(at 40% 70%, rgba(153, 102, 204, 0.2) 0px, transparent 40%),
      radial-gradient(at 90% 80%, rgba(232, 212, 160, 0.3) 0px, transparent 40%),
      radial-gradient(at 10% 90%, rgba(76, 40, 130, 0.15) 0px, transparent 40%);
    animation: moveGradient 15s ease infinite;
  }

  @keyframes moveGradient {
    0%, 100% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
    25% {
      opacity: 0.8;
      transform: scale(1.1) translateY(-5%);
    }
    50% {
      opacity: 1;
      transform: scale(1.05) translateY(3%);
    }
    75% {
      opacity: 0.9;
      transform: scale(1.08) translateY(-3%);
    }
  }

  .dark body {
    @apply text-gray-100;
    background: linear-gradient(135deg, #0A0A0F 0%, #1A1A2E 25%, #2D2D44 50%, #1A1A2E 75%, #0A0A0F 100%);
  }
  
  .dark body::before {
    background-image: 
      radial-gradient(at 20% 30%, rgba(212, 175, 55, 0.4) 0px, transparent 35%),
      radial-gradient(at 80% 20%, rgba(123, 79, 184, 0.5) 0px, transparent 40%),
      radial-gradient(at 40% 70%, rgba(153, 102, 204, 0.35) 0px, transparent 45%),
      radial-gradient(at 90% 80%, rgba(232, 212, 160, 0.3) 0px, transparent 40%),
      radial-gradient(at 10% 90%, rgba(76, 40, 130, 0.4) 0px, transparent 40%);
  }
}

@layer components {
  .glass-panel {
    @apply relative overflow-hidden rounded-2xl;
    background: rgba(255, 255, 255, 0.85);
    -webkit-backdrop-filter: blur(20px);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(212, 175, 55, 0.3);
    box-shadow: 
      0 8px 32px 0 rgba(31, 38, 135, 0.2),
      inset 0 0 20px rgba(255, 255, 255, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.5) inset;
  }

  .dark .glass-panel {
    background: rgba(26, 26, 46, 0.75);
    border: 2px solid rgba(212, 175, 55, 0.4);
    box-shadow: 
      0 8px 32px 0 rgba(212, 175, 55, 0.3),
      inset 0 0 30px rgba(212, 175, 55, 0.1),
      0 0 60px rgba(123, 79, 184, 0.2);
  }

  .glass-panel::before {
    content: '';
    @apply absolute inset-0 rounded-2xl;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.5) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(212, 175, 55, 0.2) 100%
    );
    opacity: 0.6;
    pointer-events: none;
  }

  .dark .glass-panel::before {
    background: linear-gradient(
      135deg,
      rgba(212, 175, 55, 0.3) 0%,
      rgba(123, 79, 184, 0.2) 50%,
      rgba(76, 40, 130, 0.2) 100%
    );
  }

  .btn-primary {
    @apply relative px-8 py-4 font-bold text-white rounded-full overflow-hidden;
    @apply transform transition-all duration-300 hover:scale-105 hover:shadow-glow-gold;
    background: linear-gradient(135deg, #4C2882 0%, #7B4FB8 50%, #D4AF37 100%);
    box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
  }

  .btn-primary::before {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(135deg, #D4AF37 0%, #7B4FB8 50%, #4C2882 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .btn-primary:hover::before {
    opacity: 1;
  }

  .btn-primary span {
    @apply relative z-10;
  }

  .gradient-text {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-brand-gold via-brand-purple to-brand-amethyst;
    animation: gradient 3s ease infinite;
    background-size: 200% 200%;
  }

  @keyframes gradient {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  @supports not (text-wrap: balance) {
    .text-balance {
      overflow-wrap: anywhere;
    }
  }
  
  .animation-delay-200 {
    animation-delay: 200ms;
  }
  
  .animation-delay-400 {
    animation-delay: 400ms;
  }
  
  .animation-delay-600 {
    animation-delay: 600ms;
  }
  
  .animation-delay-800 {
    animation-delay: 800ms;
  }
  
  .animation-delay-1000 {
    animation-delay: 1000ms;
  }
  
  .animation-delay-1200 {
    animation-delay: 1200ms;
  }
  
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  
  .animation-delay-4000 {
    animation-delay: 4s;
  }
  
  .animation-fill-forwards {
    animation-fill-mode: forwards;
  }
  
  /* Delay Hero animations until intro completes */
  body:not(.intro-complete) .animate-fade-in {
    opacity: 0 !important;
    animation: none !important;
  }
  
  /* Intro overlay animations */
  .intro-overlay { 
    background: #ffffff; 
    opacity: 1;
    transition: opacity 600ms ease-out;
  }
  .intro-overlay--fadeout {
    opacity: 0;
    pointer-events: none;
  }
  .intro-base { background: #ffffff; opacity: 1; }
  .intro-base--fade { animation: introBaseFade 1200ms ease-in 1600ms forwards; }
  
  .intro-title--in { animation: introTitleIn 1200ms ease-out 100ms forwards; }
  .intro-title--hold { opacity: 1; animation: introTitleOut 1000ms ease-out 2600ms forwards; }
  
  .intro-clouds {
    pointer-events: none;
    background-image:
      radial-gradient(180px 180px at 20% 30%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 40%, rgba(255,255,255,0) 60%),
      radial-gradient(220px 220px at 70% 40%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 35%, rgba(255,255,255,0) 60%),
      radial-gradient(200px 200px at 30% 75%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 30%, rgba(255,255,255,0) 60%),
      radial-gradient(160px 160px at 80% 80%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 25%, rgba(255,255,255,0) 60%),
      radial-gradient(260px 260px at 50% 50%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 35%, rgba(255,255,255,0) 70%);
    background-repeat: no-repeat;
    background-size: 0 0, 0 0, 0 0, 0 0, 0 0; /* start small to cover screen with white */
    opacity: 1;
  }
  .intro-clouds--reveal {
    animation:
      introCloudsOpen 1800ms ease-out 1400ms forwards,
      introCloudsFade 1400ms ease-in 2000ms forwards;
  }
  
  @keyframes introTitleIn {
    0% { opacity: 0; transform: translateY(12px) scale(1.02); }
    60% { opacity: 1; transform: translateY(0) scale(1.0); }
    100% { opacity: 1; transform: none; }
  }
  
  @keyframes introBaseFade {
    to { opacity: 0; }
  }
  @keyframes introTitleOut { 
    0% { opacity: 1; }
    100% { opacity: 0; } 
  }
  
  @keyframes introCloudsOpen {
    0% {
      background-size: 0 0, 0 0, 0 0, 0 0, 0 0;
      background-position: 20% 30%, 70% 40%, 30% 75%, 80% 80%, 50% 50%;
    }
    100% {
      background-size: 360px 360px, 440px 440px, 420px 420px, 340px 340px, 600px 600px;
      background-position: 18% 28%, 72% 38%, 28% 78%, 82% 82%, 50% 52%;
    }
  }
  
  @keyframes introCloudsFade {
    0% { opacity: 1; }
    100% { opacity: 0; }
  }
}
